Sure! Let's explore each of these four T-SQL features from the Microsoft Docs **General Queries** section. These features are fundamental in writing flexible, powerful queries in SQL Server:

> âœ… **Search condition**
> âœ… **Table value constructor**
> âœ… **TOP**
> âœ… **UPDATETEXT**

---

## ðŸ”¹ 1. **Search Condition**

### âž¤ Purpose:

A **search condition** is a logical expression used to **filter** rows in SQL statements such as `WHERE`, `HAVING`, `JOIN ON`, and conditional expressions like `IF`.

### âž¤ Syntax:

A search condition uses logical operators (`=`, `<`, `>`, `AND`, `OR`, `NOT`, etc.) to form a condition that evaluates to **TRUE**, **FALSE**, or **UNKNOWN**.

### âž¤ Example 1 â€“ In `WHERE` clause:

```sql
SELECT * FROM Students
WHERE Age > 18 AND Major = 'Computer Science';
```

### âž¤ Example 2 â€“ In `JOIN`:

```sql
SELECT s.Name, e.Course
FROM Students s
JOIN Enrollments e ON s.StudentID = e.StudentID
WHERE e.Semester = 'Spring 2025';
```

### âž¤ Example 3 â€“ In `IF` statement:

```sql
DECLARE @Age INT = 17;

IF @Age < 18
    PRINT 'Minor';
ELSE
    PRINT 'Adult';
```

> âœ… **Search conditions are at the heart of filtering logic** in T-SQL.

---

## ðŸ”¹ 2. **Table Value Constructor**

### âž¤ Purpose:

The **table value constructor** allows you to define a set of **rows inline** using the `VALUES` keyword. It's often used for `INSERT` statements or temporary row sets.

### âž¤ Syntax:

```sql
VALUES (val1, val2, ...), (val3, val4, ...)
```

### âž¤ Example â€“ Insert multiple rows:

```sql
INSERT INTO Students (Name, Age)
VALUES ('Alice', 20), ('Bob', 22), ('Charlie', 21);
```

### âž¤ Example â€“ Inline row set for a `SELECT`:

```sql
SELECT * FROM 
    (VALUES (1, 'Math'), (2, 'Science')) AS Courses(CourseID, CourseName);
```

### âž¤ Example â€“ Use with `IN` clause:

```sql
SELECT * FROM Departments
WHERE DepartmentID IN (SELECT v FROM (VALUES (1), (3), (5)) AS V(v));
```

> âœ… Great for mocking data or passing row sets without creating a temp table.

---

## ðŸ”¹ 3. **TOP**

### âž¤ Purpose:

The `TOP` keyword limits the **number of rows returned or affected** by a query. It can be used with `SELECT`, `INSERT`, `UPDATE`, or `DELETE`.

### âž¤ Syntax:

```sql
SELECT TOP (n) column_list FROM table;
-- OR
SELECT TOP (n) PERCENT column_list FROM table;
```

### âž¤ Example â€“ Get top 5 students:

```sql
SELECT TOP (5) * FROM Students
ORDER BY GPA DESC;
```

### âž¤ Example â€“ With `PERCENT`:

```sql
SELECT TOP (10) PERCENT * FROM Employees
ORDER BY HireDate ASC;
```

### âž¤ Example â€“ With `UPDATE`:

```sql
UPDATE TOP (1) Inventory
SET Quantity = Quantity - 1
WHERE ProductID = 123 AND Quantity > 0;
```

> âœ… Useful for **pagination, testing**, or when working with large result sets.

---

## ðŸ”¹ 4. **UPDATETEXT**

### âž¤ Purpose:

Used to **update parts of `text`, `ntext`, or `image` data** in-place using a pointer to the data. Similar to `WRITETEXT`, but allows partial updates.

> âš ï¸ **Deprecated** â€” use `varchar(max)`/`nvarchar(max)` with `UPDATE` instead.

### âž¤ Syntax:

```sql
UPDATETEXT table.column text_pointer offset delete_length insert_text
```

* `text_pointer`: obtained using `TEXTPTR()`.
* `offset`: byte offset where update begins.
* `delete_length`: number of bytes to remove.
* `insert_text`: text to insert.

### âž¤ Example:

```sql
DECLARE @ptrval BINARY(16);

-- Get pointer to the text data
SELECT @ptrval = TEXTPTR(TextColumn)
FROM Articles
WHERE ArticleID = 1;

-- Replace part of the text
UPDATETEXT Articles.TextColumn @ptrval 0 7 'Updated';
```

This example replaces the first 7 bytes of a `text` column with `'Updated'`.

> ðŸ›‘ **Avoid using in new development** â€” use modern `UPDATE` on `VARCHAR(MAX)` or `NVARCHAR(MAX)` instead.

---

## âœ… Summary Table

| Feature                   | Purpose                                                                |
| ------------------------- | ---------------------------------------------------------------------- |
| `Search condition`        | Logical expression to filter rows (`WHERE`, `JOIN ON`, `IF`, etc.)     |
| `Table value constructor` | Allows inline row sets with `VALUES`                                   |
| `TOP`                     | Limits rows returned or affected by a query                            |
| `UPDATETEXT`              | Updates part of a legacy `text`, `ntext`, or `image` column (obsolete) |

---

Would you like to see how these can be used in stored procedures, or how to replace `UPDATETEXT` with modern `UPDATE` syntax?
